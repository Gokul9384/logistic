{"version":3,"sources":["../src/main.ts"],"sourcesContent":["import { NestFactory } from '@nestjs/core';\r\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger';\r\nimport { AppModule } from './app.module';\r\nimport compression from 'compression';\r\nimport errorHandler from 'errorhandler';\r\nimport { urlencoded } from 'express';\r\nimport { ValidationPipe, VersioningType } from '@nestjs/common';\r\nimport passport from 'passport';\r\nimport { ExceptionHelper } from './Helper/Exception.helper';\r\nimport { CommonSeederService } from './Database/Seeds/CommonSeeder.service';\r\nimport { ConfigService } from '@nestjs/config';\r\nimport { NestExpressApplication } from '@nestjs/platform-express';\r\n\r\nasync function bootstrap() {\r\n  const app = await NestFactory.create<NestExpressApplication>(AppModule, {\r\n    cors: { origin: '*', exposedHeaders: '*' },\r\n  });\r\n  app.enableCors();\r\n  app.setGlobalPrefix('api');\r\n  app.enableVersioning({\r\n    type: VersioningType.URI,\r\n  });\r\n  app.use(compression());\r\n  app.use(errorHandler());\r\n  app.use(urlencoded({ limit: '500mb', extended: true }));\r\n  app.use(passport.initialize());\r\n  // app.useGlobalPipes(new ValidationPipe({ transform: true, whitelist: true, forbidNonWhitelisted: true, forbidUnknownValues: true }));\r\n  app.useGlobalPipes(new ValidationPipe({ transform: true }));\r\n  app.useGlobalFilters(new ExceptionHelper());\r\n  const config = new DocumentBuilder()\r\n    .setTitle('Code Move')\r\n    .addBearerAuth()\r\n    .setDescription('Code Move API Description')\r\n    .setVersion('1.0')\r\n    .setExternalDoc('Postman Collection', '/swagger-json')\r\n    .setContact(\"Code Move\", \"https://codemove.co.uk/\", \"codemove.co.uk\")\r\n    .build();\r\n  const document = SwaggerModule.createDocument(app, config);\r\n  SwaggerModule.setup('swagger', app, document, { swaggerOptions: { tagsSorter: 'alpha', enableSearch: true } });\r\n  const _ConfigService = app.get(ConfigService);\r\n  const port = process.env.PORT || _ConfigService.get('PORT');\r\n  await app.listen(port);\r\n  console.log(`Application is running on port ${port}`);\r\n\r\n  if (_ConfigService.get(\"Database.Seed\") == \"true\") {\r\n    const _CommonSeederService = app.get(CommonSeederService);\r\n    await _CommonSeederService.Run();\r\n  }\r\n}\r\nbootstrap();\r\n"],"names":["bootstrap","app","NestFactory","create","AppModule","cors","origin","exposedHeaders","enableCors","setGlobalPrefix","enableVersioning","type","VersioningType","URI","use","compression","errorHandler","urlencoded","limit","extended","passport","initialize","useGlobalPipes","ValidationPipe","transform","useGlobalFilters","ExceptionHelper","config","DocumentBuilder","setTitle","addBearerAuth","setDescription","setVersion","setExternalDoc","setContact","build","document","SwaggerModule","createDocument","setup","swaggerOptions","tagsSorter","enableSearch","_ConfigService","get","ConfigService","port","process","env","PORT","listen","console","log","_CommonSeederService","CommonSeederService","Run"],"mappings":";;;;sBAA4B;yBACmB;2BACrB;oEACF;qEACC;yBACE;wBACoB;iEAC1B;iCACW;qCACI;wBACN;;;;;;AAG9B,eAAeA;IACb,MAAMC,MAAM,MAAMC,iBAAW,CAACC,MAAM,CAAyBC,oBAAS,EAAE;QACtEC,MAAM;YAAEC,QAAQ;YAAKC,gBAAgB;QAAI;IAC3C;IACAN,IAAIO,UAAU;IACdP,IAAIQ,eAAe,CAAC;IACpBR,IAAIS,gBAAgB,CAAC;QACnBC,MAAMC,sBAAc,CAACC,GAAG;IAC1B;IACAZ,IAAIa,GAAG,CAACC,IAAAA,oBAAW;IACnBd,IAAIa,GAAG,CAACE,IAAAA,qBAAY;IACpBf,IAAIa,GAAG,CAACG,IAAAA,mBAAU,EAAC;QAAEC,OAAO;QAASC,UAAU;IAAK;IACpDlB,IAAIa,GAAG,CAACM,iBAAQ,CAACC,UAAU;IAC3B,uIAAuI;IACvIpB,IAAIqB,cAAc,CAAC,IAAIC,sBAAc,CAAC;QAAEC,WAAW;IAAK;IACxDvB,IAAIwB,gBAAgB,CAAC,IAAIC,gCAAe;IACxC,MAAMC,SAAS,IAAIC,wBAAe,GAC/BC,QAAQ,CAAC,aACTC,aAAa,GACbC,cAAc,CAAC,6BACfC,UAAU,CAAC,OACXC,cAAc,CAAC,sBAAsB,iBACrCC,UAAU,CAAC,aAAa,2BAA2B,kBACnDC,KAAK;IACR,MAAMC,WAAWC,sBAAa,CAACC,cAAc,CAACrC,KAAK0B;IACnDU,sBAAa,CAACE,KAAK,CAAC,WAAWtC,KAAKmC,UAAU;QAAEI,gBAAgB;YAAEC,YAAY;YAASC,cAAc;QAAK;IAAE;IAC5G,MAAMC,iBAAiB1C,IAAI2C,GAAG,CAACC,qBAAa;IAC5C,MAAMC,OAAOC,QAAQC,GAAG,CAACC,IAAI,IAAIN,eAAeC,GAAG,CAAC;IACpD,MAAM3C,IAAIiD,MAAM,CAACJ;IACjBK,QAAQC,GAAG,CAAC,CAAC,+BAA+B,EAAEN,MAAM;IAEpD,IAAIH,eAAeC,GAAG,CAAC,oBAAoB,QAAQ;QACjD,MAAMS,uBAAuBpD,IAAI2C,GAAG,CAACU,wCAAmB;QACxD,MAAMD,qBAAqBE,GAAG;IAChC;AACF;AACAvD"}